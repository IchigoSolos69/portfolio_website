@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import fonts */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=Inter:wght@300;400;500;600;700&display=swap');

/* -------------------------------
   Custom CSS Variables & Base
-------------------------------- */
@layer base {
  :root {
    --background: 225 8% 6%;
    --foreground: 0 0% 98%;
    --spiritual-energy: 32 98% 75%;
    --soul-society: 210 9% 14%;
    --reiatsu-glow: 186 24% 74%;
    --zanpakuto-steel: 150 5% 85%;
    --hollow-mask: 0 0% 20%;
    --kido-purple: 266 50% 62%;
    --diagonal-length: 100vw;
    --diagonal-angle: 45deg;
    --slash-width: 100vw;
    --slash-height: 6px;
  }

  * { border-color: hsl(var(--hollow-mask)); }
  body {
    color: hsl(var(--foreground));
    overflow-x: hidden;
    font-family: 'Inter', 'Noto Sans JP', sans-serif;
    min-height: 100vh;
    scroll-behavior: smooth;
  }

  /* Fixed background */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    z-index: -2;
    background:
      linear-gradient(135deg, rgba(0,0,0,0.7), rgba(20,20,40,0.8), rgba(0,0,0,0.9)),
      url('https://e1.pxfuel.com/desktop-wallpaper/414/600/desktop-wallpaper-bleach-black-and-white-bleach-black.jpg'),
      linear-gradient(135deg, #0a0a0a, #1a1a2e, #16213e);
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
  }

  /* Hide scrollbars */
  ::-webkit-scrollbar { display: none; }
  html { scrollbar-width: none; }
}

/* --------------------------------
   Loading Screen & Slash Animation
--------------------------------- */
.cinematic-loading-overlay { position: fixed; inset: 0; z-index: 10000; }

/* Phase 0: Click to Start */
.click-to-start-screen {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.click-background {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at center, #0a0a1a, #1a1a2e, #16213e);
}

.click-content {
  position: relative;
  z-index: 10;
  text-align: center;
  animation: clickContentFloat 3s ease-in-out infinite;
}

.click-title {
  font-family: 'Noto Sans JP', sans-serif;
  font-size: 2.5rem;
  color: #FFA500;
  text-shadow: 0 0 20px rgba(255,165,0,0.8);
  margin-bottom: 1rem;
  font-weight: 700;
}

.click-subtitle {
  font-size: 1.2rem;
  color: rgba(255,255,255,0.8);
  letter-spacing: 2px;
  margin-bottom: 2rem;
}

.click-indicator {
  font-size: 2rem;
  animation: clickIndicatorBounce 1.5s ease-in-out infinite;
}

.click-overlay {
  position: absolute;
  inset: 0;
  z-index: 20;
}

@keyframes clickContentFloat {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

@keyframes clickIndicatorBounce {
  0%, 100% { transform: translateY(0); opacity: 1; }
  50% { transform: translateY(-15px); opacity: 0.7; }
}

/* Phase 1: Loading */
.loading-screen {
  position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center;
}
.loading-background {
  position: absolute; inset: 0;
  background: radial-gradient(circle at center, #0a0a1a, #1a1a2e, #16213e);
}
.energy-particles,
.spark-particles,
.slash-particles { position: absolute; inset: 0; pointer-events: none; }
.energy-particle,
.spark-particle {
  position: absolute; width: 3px; height: 3px; border-radius: 50%;
  background: radial-gradient(circle, #FFA500, #FF8C00 60%, transparent);
  box-shadow: 0 0 8px rgba(255,165,0,0.6);
  animation: energyFloat linear infinite;
}
@keyframes energyFloat {
  0% { transform: translateY(100vh) scale(0); opacity:0 }
  10% { opacity:1; transform: translateY(90vh) scale(1) }
  50% { transform: translateY(50vh) scale(1.2) }
  90% { transform: translateY(10vh) scale(1) }
  100% { transform: translateY(-10vh) scale(0); opacity:0 }
}

.loader-container {
  position: relative; z-index:10; text-align:center;
}
.circular-loader {
  position: relative; width:100px; height:100px; margin-bottom:1rem;
}
.loader-ring {
  position:absolute; inset:0; border:4px solid transparent;
  border-top-color:#FFA500; border-right-color:#FF8C00;
  border-radius:50%; animation: loaderSpin 1.5s linear infinite;
  filter: drop-shadow(0 0 15px rgba(255,165,0,0.8));
}
.loader-core {
  position:absolute; top:50%; left:50%; width:30px; height:30px;
  background: radial-gradient(circle,#FFA500,#FF8C00);
  border-radius:50%; transform:translate(-50%, -50%);
  animation: loaderPulse 2s ease-in-out infinite;
}
@keyframes loaderSpin { to { transform: rotate(360deg) } }
@keyframes loaderPulse {
  0%,100% { transform: translate(-50%,-50%) scale(1); }
  50% { transform: translate(-50%,-50%) scale(1.3); }
}

.loading-text .japanese-loading {
  font-family:'Noto Sans JP'; font-size:1.2rem; color:#FFA500;
  text-shadow:0 0 15px rgba(255,165,0,0.9);
  animation:textGlow 2s ease-in-out infinite alternate;
}
.loading-text .english-loading {
  font-size:1rem; color:rgba(255,255,255,0.7); letter-spacing:2px;
}
@keyframes textGlow {
  from { text-shadow:0 0 15px rgba(255,165,0,0.9) }
  to   { text-shadow:0 0 25px rgba(255,165,0,1) }
}

/* Phase 2: Ultra-Smooth Optimized Trail with Perfect Audio Sync */
.sword-slash-phase { 
  position: absolute; 
  inset: 0; 
  background: #000; 
  overflow: hidden;
  will-change: transform; /* GPU acceleration hint */
}

.dramatic-pause {
  position: absolute; 
  inset: 0; 
  background: #000;
  animation: fadeOut 0.2s ease-out 0.1s forwards;
}
@keyframes fadeOut { to { opacity: 0; visibility: hidden } }

/* Optimized Trail Container */
.slash-particles {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 25;
  transform: translateZ(0); /* Force hardware acceleration */
  backface-visibility: hidden; /* Smooth animations */
}

/* Ultra-smooth particle trail - 8 second duration to match audio */
.slash-particles .diagonal-particle {
  position: absolute;
  width: 10px;
  height: 10px;
  background: radial-gradient(circle, #FFF 0%, #FFA500 25%, #FF8C00 50%, transparent 85%);
  border-radius: 50%;
  opacity: 0;
  will-change: transform, opacity;
  transform: translateZ(0); /* Hardware acceleration */
  box-shadow: 
    0 0 30px rgba(255, 165, 0, 1),
    0 0 60px rgba(255, 255, 255, 0.8),
    0 0 90px rgba(255, 165, 0, 0.6),
    0 0 120px rgba(255, 140, 0, 0.3);
  animation: ultraSmoothTrail 8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

/* 8-second ultra-smooth trail animation synchronized with audio */
@keyframes ultraSmoothTrail {
  0% { 
    opacity: 0; 
    transform: translate3d(0, 0, 0) scale(0.2) rotate(0deg); 
    filter: blur(8px) brightness(0.5);
  }
  3% { 
    opacity: 0.4; 
    transform: translate3d(calc(100vw * 0.03), calc(-100vh * 0.03), 0) scale(0.6) rotate(8deg); 
    filter: blur(6px) brightness(0.8);
  }
  8% { 
    opacity: 0.7; 
    transform: translate3d(calc(100vw * 0.08), calc(-100vh * 0.08), 0) scale(0.9) rotate(20deg); 
    filter: blur(4px) brightness(1);
  }
  15% { 
    opacity: 0.9; 
    transform: translate3d(calc(100vw * 0.15), calc(-100vh * 0.15), 0) scale(1.1) rotate(35deg); 
    filter: blur(2px) brightness(1.2);
  }
  25% { 
    opacity: 1; 
    transform: translate3d(calc(100vw * 0.25), calc(-100vh * 0.25), 0) scale(1.4) rotate(55deg); 
    filter: blur(1px) brightness(1.5);
  }
  40% { 
    opacity: 1; 
    transform: translate3d(calc(100vw * 0.4), calc(-100vh * 0.4), 0) scale(1.8) rotate(80deg); 
    filter: blur(0px) brightness(2);
  }
  55% { 
    opacity: 1; 
    transform: translate3d(calc(100vw * 0.55), calc(-100vh * 0.55), 0) scale(2.0) rotate(105deg); 
    filter: blur(0px) brightness(2.2);
  }
  70% { 
    opacity: 0.95; 
    transform: translate3d(calc(100vw * 0.7), calc(-100vh * 0.7), 0) scale(1.9) rotate(130deg); 
    filter: blur(1px) brightness(2);
  }
  82% { 
    opacity: 0.8; 
    transform: translate3d(calc(100vw * 0.82), calc(-100vh * 0.82), 0) scale(1.6) rotate(150deg); 
    filter: blur(2px) brightness(1.7);
  }
  90% { 
    opacity: 0.5; 
    transform: translate3d(calc(100vw * 0.9), calc(-100vh * 0.9), 0) scale(1.2) rotate(165deg); 
    filter: blur(4px) brightness(1.3);
  }
  96% { 
    opacity: 0.2; 
    transform: translate3d(calc(100vw * 0.96), calc(-100vh * 0.96), 0) scale(0.8) rotate(175deg); 
    filter: blur(6px) brightness(0.9);
  }
  100% { 
    opacity: 0; 
    transform: translate3d(calc(100vw * 1.05), calc(-100vh * 1.05), 0) scale(0.3) rotate(180deg); 
    filter: blur(10px) brightness(0.5);
  }
}

/* Name Appears and Splits Animation */
.name-appear-and-split {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 30;
  opacity: 0;
  animation: nameAppearThenSplit 4s ease-out 8s forwards;
}

.name-appear-and-split h1 {
  font-size: 4rem;
  font-weight: bold;
  background: linear-gradient(90deg, #FFA500, #FFFFFF, #FFA500);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 0 40px rgba(255,165,0,0.8);
  filter: drop-shadow(0 0 20px rgba(255,255,255,0.6));
  will-change: transform, opacity;
}

@keyframes nameAppearThenSplit {
  0% {
    opacity: 0;
    transform: scale(0.8) translateY(20px);
    filter: blur(5px);
  }
  15% {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: blur(0px);
  }
  70% {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: blur(0px);
  }
  85% {
    opacity: 0.8;
    transform: scale(1.1) translateY(-10px);
    filter: blur(1px);
  }
  100% {
    opacity: 0;
    transform: scale(1.3) translateY(-30px);
    filter: blur(3px);
  }
}

/* Diagonal Split Curtains - Triggered after name disappears */
.diagonal-split-curtains {
  position: absolute;
  inset: 0;
  z-index: 25;
  pointer-events: none;
}

.diagonal-curtain-left {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #000;
  clip-path: polygon(0 0, 100% 0, 0 100%);
  transform: translateX(0) translateY(0);
  animation: curtainSlideLeft 2.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) 11s forwards;
}

.diagonal-curtain-right {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #000;
  clip-path: polygon(100% 0, 100% 100%, 0 100%);
  transform: translateX(0) translateY(0);
  animation: curtainSlideRight 2.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) 11s forwards;
}

@keyframes curtainSlideLeft {
  0% { 
    transform: translateX(0) translateY(0);
    opacity: 1;
  }
  70% {
    transform: translateX(-80%) translateY(-80%);
    opacity: 0.8;
  }
  100% { 
    transform: translateX(-150%) translateY(-150%);
    opacity: 0;
  }
}

@keyframes curtainSlideRight {
  0% { 
    transform: translateX(0) translateY(0);
    opacity: 1;
  }
  70% {
    transform: translateX(80%) translateY(80%);
    opacity: 0.8;
  }
  100% { 
    transform: translateX(150%) translateY(150%);
    opacity: 0;
  }
}

/* Website Content Reveal - After curtains part */
.website-content-reveal {
  position: absolute;
  inset: 0;
  opacity: 0;
  transform: scale(0.95);
  filter: blur(3px);
  animation: websiteReveal 2.5s ease-out 12.5s forwards;
  z-index: 10;
}

@keyframes websiteReveal {
  0% {
    opacity: 0;
    transform: scale(0.95) translateY(30px);
    filter: blur(3px);
  }
  40% {
    opacity: 0.6;
    transform: scale(0.98) translateY(10px);
    filter: blur(1px);
  }
  70% {
    opacity: 0.9;
    transform: scale(1) translateY(3px);
    filter: blur(0.3px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: blur(0px);
  }
}

/* Reduced motion for performance */
@media (prefers-reduced-motion: reduce) {
  .diagonal-particle {
    animation-duration: 4s !important;
  }
  
  .ultraSmoothTrail {
    animation-duration: 4s !important;
  }
}

/* Enhanced Typing Animation */
.typing-container {
  position: relative;
  display: inline-block;
}

.typing-text {
  color: #fff;
  background: linear-gradient(
    90deg,
    #fff 0%,
    #ffa500 25%,
    #fff 50%,
    #ffa500 75%,
    #fff 100%
  );
  background-size: 200% 100%;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: shimmerText 3s ease-in-out infinite;
  text-shadow: 0 0 20px rgba(255,165,0,0.5);
  filter: drop-shadow(0 0 10px rgba(255,165,0,0.3));
  display: inline-block;
  min-height: 1em;
}

.typing-cursor {
  border-right: 3px solid #ffa500;
  animation: blinkCursor 1s infinite, glowCursor 2s ease-in-out infinite alternate;
  padding-right: 2px;
  position: relative;
}

.typing-cursor::after {
  content: '';
  position: absolute;
  right: -1px;
  top: 0;
  bottom: 0;
  width: 3px;
  background: linear-gradient(to bottom, transparent, #ffa500, transparent);
  box-shadow: 0 0 15px #ffa500, 0 0 25px #ffa500;
}

@keyframes shimmerText {
  0%, 100% { background-position: 200% 0; }
  50% { background-position: -200% 0; }
}

@keyframes blinkCursor {
  0%, 50% { border-color: #ffa500; }
  51%, 100% { border-color: transparent; }
}

@keyframes glowCursor {
  0% { 
    filter: drop-shadow(0 0 5px #ffa500);
    transform: scaleY(1);
  }
  100% { 
    filter: drop-shadow(0 0 20px #ffa500) drop-shadow(0 0 30px #fff);
    transform: scaleY(1.1);
  }
}

/* Character reveal effect */
.char-reveal {
  display: inline-block;
  opacity: 0;
  transform: translateY(10px) rotateX(45deg);
  animation: revealChar 0.4s ease-out forwards;
  color: inherit;
  background: inherit;
  -webkit-background-clip: inherit;
  background-clip: inherit;
  -webkit-text-fill-color: inherit;
}

@keyframes revealChar {
  0% {
    opacity: 0;
    transform: translateY(10px) rotateX(45deg) scale(0.9);
    filter: blur(3px);
  }
  70% {
    opacity: 0.8;
    transform: translateY(-2px) rotateX(0deg) scale(1.05);
    filter: blur(1px);
  }
  100% {
    opacity: 1;
    transform: translateY(0) rotateX(0deg) scale(1);
    filter: blur(0px);
  }
}

/* Glitch effect for text transitions */
@keyframes glitchText {
  0%, 100% { transform: translateX(0); }
  10% { transform: translateX(-2px) skewX(-5deg); }
  20% { transform: translateX(2px) skewX(5deg); }
  30% { transform: translateX(-1px) skewX(-2deg); }
  40% { transform: translateX(1px) skewX(2deg); }
  50% { transform: translateX(-1px) skewX(-1deg); }
  60% { transform: translateX(1px) skewX(1deg); }
  70% { transform: translateX(0) skewX(0deg); }
}

.typing-glitch {
  animation: glitchText 0.3s ease-in-out;
}

/* --------------------------------
   Main Content Animations & Effects
--------------------------------- */

/* About Me Boxes: center aligned */
.programming-lang-box,
.about-skill-box {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
}

/* Missing animation classes */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes langBoxFloat {
  from { opacity: 0; transform: translateY(30px) scale(0.8) rotateX(15deg); }
  to { opacity: 1; transform: translateY(0) scale(1) rotateX(0deg); }
}

@keyframes gradient-text {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

@keyframes skill-fill {
  from { width: 0%; }
  to { width: var(--target-width, 100%); }
}

@keyframes blink {
  0%, 50% { border-right-color: transparent; }
  51%, 100% { border-right-color: currentColor; }
}

/* Animation utility classes */
.animate-skill-fill {
  animation: skill-fill 2s ease-out forwards;
}

.skill-progress {
  width: 0%;
  animation: skill-fill 2.5s ease-out forwards;
  animation-fill-mode: forwards;
}

.animate-gradient-text {
  animation: gradient-text 3s ease-in-out infinite;
}

.animate-blink {
  animation: blink 1s step-end infinite;
}

.animate-fade-in-up {
  animation: fadeInUp 0.6s ease-out forwards;
}

/* Enhanced Particle Systems */
.particle-field { position: absolute; inset: 0; overflow: hidden; }
.moving-particle {
  position: absolute;
  width: 2px;
  height: 2px;
  background: radial-gradient(circle, rgba(255,255,255,0.8), transparent);
  border-radius: 50%;
  animation: particleMove 10s linear infinite;
}

@keyframes particleMove {
  0% { transform: translateY(100vh) translateX(0); opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { transform: translateY(-10vh) translateX(50px); opacity: 0; }
}

/* Optimized particles for better performance */
.optimized-particle-field {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}

.optimized-particle {
  position: absolute;
  width: 1px;
  height: 1px;
  background: rgba(255, 255, 255, 0.6);
  border-radius: 50%;
  animation: optimizedParticleFloat 15s linear infinite;
}

@keyframes optimizedParticleFloat {
  0% { transform: translateY(100vh) translateX(0) scale(0); opacity: 0; }
  5% { opacity: 1; transform: translateY(95vh) translateX(10px) scale(1); }
  95% { opacity: 1; transform: translateY(5vh) translateX(-10px) scale(1); }
  100% { transform: translateY(0) translateX(0) scale(0); opacity: 0; }
}

/* Dynamic background effects */
.dynamic-background {
  position: absolute;
  inset: 0;
  background: 
    radial-gradient(circle at 20% 80%, rgba(255, 165, 0, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(186, 186, 186, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 40% 40%, rgba(102, 51, 153, 0.1) 0%, transparent 50%);
  animation: backgroundShift 20s ease-in-out infinite;
}

@keyframes backgroundShift {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.6; }
}

/* Small particles for all sections */
.small-particles {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}

.small-particle {
  position: absolute;
  width: 3px;
  height: 3px;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.8) 0%, rgba(255, 165, 0, 0.4) 50%, transparent 100%);
  border-radius: 50%;
  box-shadow: 0 0 4px rgba(255, 255, 255, 0.6);
  animation: smallParticleFloat 20s linear infinite;
}

@keyframes smallParticleFloat {
  0% { 
    transform: translateY(100vh) translateX(0) scale(0.5); 
    opacity: 0; 
  }
  5% { 
    opacity: 1; 
    transform: translateY(95vh) translateX(5px) scale(1); 
  }
  50% {
    opacity: 0.8;
    transform: translateY(50vh) translateX(-10px) scale(1.2);
  }
  95% { 
    opacity: 1; 
    transform: translateY(5vh) translateX(15px) scale(0.8); 
  }
  100% { 
    transform: translateY(-5vh) translateX(20px) scale(0); 
    opacity: 0; 
  }
}

/* Additional utility classes for Tailwind compatibility */
.bg-spiritual-gradient {
  background: linear-gradient(135deg, hsl(var(--spiritual-energy)), hsl(var(--reiatsu-glow)));
}

.text-spiritual-energy { color: hsl(var(--spiritual-energy)); }
.text-reiatsu-glow { color: hsl(var(--reiatsu-glow)); }
.text-kido-purple { color: hsl(var(--kido-purple)); }
.bg-soul-society { background-color: hsl(var(--soul-society)); }
.border-spiritual-energy { border-color: hsl(var(--spiritual-energy)); }

.japanese-text {
  font-family: 'Noto Sans JP', sans-serif;
  font-weight: 300;
}
