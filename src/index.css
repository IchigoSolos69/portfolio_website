@tailwind base;
@tailwind components;
@tailwind utilities;

/* -------------------------------
   Custom CSS Variables & Base
--------------------------------- */
@layer base {
  :root {
    --background: 225 8% 6%;
    --foreground: 0 0% 98%;
    --spiritual-energy: 32 98% 75%;
    --soul-society: 210 9% 14%;
    --reiatsu-glow: 186 24% 74%;
    --slash-length: 100vw;
    --slash-angle: 45deg;
  }

  * { border-color: hsl(var(--spiritual-energy)); }
  body {
    @apply bg-black text-white overflow-x-hidden min-h-screen;
    font-family: 'Inter', 'Noto Sans JP', sans-serif;
    scroll-behavior: smooth;
  }

  /* Preload slash audio hint (modern browsers) */
  link[rel="preload"][as="audio"] { display: none; }
}

/* ========================================
   Phase 1: Loading Screen
   ======================================== */
.cinematic-loading-overlay {
  @apply fixed inset-0 z-[10000] flex items-center justify-center bg-black;
}
.loading-screen {
  @apply relative w-full h-full flex items-center justify-center;
}
.loading-background {
  @apply absolute inset-0;
  background: radial-gradient(circle at center, #0a0a1a, #1a1a2e, #16213e);
}
.energy-particles,
.spark-particles {
  @apply absolute inset-0 pointer-events-none;
}
.energy-particle,
.spark-particle {
  @apply absolute rounded-full;
  width: 3px; height: 3px;
  background: radial-gradient(circle, #FFA500, #FF8C00 60%, transparent);
  box-shadow: 0 0 8px rgba(255,165,0,0.6);
  animation: energyFloat 5s linear infinite;
}
@keyframes energyFloat {
  0%   { transform: translateY(100vh) scale(0); opacity:0 }
  10%  { opacity:1; transform: translateY(90vh) scale(1) }
  50%  { transform: translateY(50vh) scale(1.2) }
  90%  { transform: translateY(10vh) scale(1) }
  100% { transform: translateY(-10vh) scale(0); opacity:0 }
}

.loader-container {
  @apply relative z-10 flex flex-col items-center gap-4;
}
.circular-loader {
  @apply relative w-24 h-24;
}
.loader-ring {
  @apply absolute inset-0 rounded-full;
  border: 4px solid transparent;
  border-top-color: #FFA500;
  border-right-color: #FF8C00;
  animation: loaderSpin 1.5s linear infinite;
  filter: drop-shadow(0 0 15px rgba(255,165,0,0.8));
}
.loader-core {
  @apply absolute rounded-full;
  width: 30px; height: 30px;
  background: radial-gradient(circle,#FFA500,#FF8C00);
  top: 50%; left: 50%; transform: translate(-50%,-50%);
  animation: loaderPulse 2s ease-in-out infinite;
}
@keyframes loaderSpin { to { transform: rotate(360deg) } }
@keyframes loaderPulse {
  0%,100% { transform: translate(-50%,-50%) scale(1); }
  50% { transform: translate(-50%,-50%) scale(1.3); }
}

.loading-text {
  @apply text-center;
}
.japanese-loading {
  font-family: 'Noto Sans JP', sans-serif;
  @apply text-xl text-orange-400;
  text-shadow: 0 0 15px rgba(255,165,0,0.9);
  animation: textGlow 2s ease-in-out infinite alternate;
}
.english-loading {
  @apply text-sm text-gray-300 tracking-widest;
}
@keyframes textGlow {
  from { text-shadow:0 0 15px rgba(255,165,0,0.9) }
  to   { text-shadow:0 0 25px rgba(255,165,0,1) }
}

/* ========================================
   Phase 2: Perfect Diagonal Slash
   ======================================== */
.sword-slash-phase {
  @apply absolute inset-0 bg-black overflow-hidden;
}
.dramatic-pause {
  @apply absolute inset-0 bg-black;
  animation: fadeOut 0.2s ease-out 0.2s forwards;
}
@keyframes fadeOut { to { opacity:0; visibility:hidden } }

/* Container that holds CSS vars for slash */
.slash-container {
  @apply absolute inset-0 pointer-events-none;
}

/* Slash line and glow use dynamic length + angle */
.slash-line,
.slash-glow {
  @apply absolute bottom-0 left-0;
  width: var(--slash-length);
  transform-origin: bottom left;
  transform: rotate(var(--slash-angle)) scaleX(0);
  opacity: 0;
}
.slash-line {
  height: 4px;
  background: linear-gradient(
    to right,
    transparent 0%,
    #FFA500 20%,
    #FFFFFF 50%,
    #FFA500 80%,
    transparent 100%
  );
  box-shadow: 0 0 20px #FFA500, 0 0 40px #FFFFFF;
}
.slash-glow {
  height: 12px;
  background: radial-gradient(
    circle at center,
    rgba(255,140,0,0.3) 0%,
    transparent 70%
  );
  filter: blur(8px);
}

/* Reveal animations */
@keyframes slashReveal {
  to {
    transform: rotate(var(--slash-angle)) scaleX(1);
    opacity: 1;
  }
}
@keyframes slashGlow {
  to {
    transform: rotate(var(--slash-angle)) scaleX(1);
    opacity: 0.8;
  }
}
.animate-slash {
  animation: slashReveal 1s ease-out forwards;
}
.animate-slash-glow {
  animation: slashGlow 1s ease-out forwards;
}

/* ========================================
   Phase 3: Curtain Reveal
   ======================================== */
.curtain-reveal-phase {
  @apply absolute inset-0 bg-black;
}
.diagonal-curtain {
  @apply absolute inset-0 bg-black;
  clip-path: polygon(0 100%,0 100%,0 100%,0 100%);
  animation: curtainWipe 1s ease-out forwards;
}
@keyframes curtainWipe {
  100% {
    clip-path: polygon(0 0,100% 0,0 100%,0 100%);
    opacity: 0;
    visibility: hidden;
  }
}

/* ========================================
   About Me Boxes Centered
   ======================================== */
.programming-lang-box,
.about-skill-box {
  @apply flex flex-col items-center justify-center text-center;
}
